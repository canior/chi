<!--pages/product/detail.wxml-->
<import src="/pages/tmpl/price.wxml"/>
<import src="/pages/tmpl/productReview.wxml"/>
<view class="container">

  <view class="banner">
    <swiper indicator-dots="true" autoplay="true" interval="5000" duration="500" circular="true">
      <swiper-item wx:for="{{product.productImages}}" wx:key="id" wx:for-item="productImage">
        <image src="{{imgUrlPrefix + '/' + productImage.fileId}}" />
      </swiper-item>
    </swiper>
    <view class="tip"><text>两人</text><text>拼团</text></view>    
  </view>

  <view class="line">
    <template is="price" data="{{product}}"/>
    <view class="sold">已售{{product.soldNum}}份</view>
  </view>

  <view class="name">{{product.title}}</view>

  <view class="desc">{{product.shortDescription}}</view>

  <view class="chi-reward-container">
    <view class="line reward">团长返现￥{{product.rewards}}</view>
    <view class="line btn" bindtap="toWhere?">每单皆有返现，查看详情></view>
  </view>
</view>
<view class="split-line"/>

<view class="container">
  <view class="specs">
    <view class="title">商品详情</view>
    <view class="img" wx:for="{{product.productSpecImages}}" wx:key="id" wx:for-item="productSpecImage">
      <image src="{{imgUrlPrefix + '/' + productSpecImage.fileId}}"/>
    </view>
  </view>
</view>
<view class="split-line"/>

<view class="container">
  <template is="productReview" data="{{...productReviewData, imgUrlPrefix, product}}"/>
</view>

<view class="bottom">
    <view class="item home" bindtap="toHome">
      <image src="/images/home2.png"/>
      <text>首页</text>
    </view>
    <view class="item service" bindtap="showModal">
      <image src="/images/share.png"/>
      <text>分享</text>
    </view>
    <!--<button class="item service btn-clear" open-type='contact'>
      <image src="/images/service.png"/>
      <text>客服</text>
    </button>-->
    <button class="item btn order" bindtap="showModal" disabled="{{btnDisabled}}"><text>￥{{product.price}}</text><text>单独购买</text></button>    
    <button class="item btn group" bindtap="tpaCreateGroup" disabled="{{btnDisabled}}"><text>￥{{product.groupPrice}}</text><text>发起拼团</text></button>
</view>

<!--单独购买弹窗-->
<view class="chi-mask" wx:if="{{showModal}}" bindtap="hideModal"/>
<view class="chi-modal" wx:if="{{showModal}}">
  <view class="title">提醒</view>
  <view class="body">
    <view>您确定花费￥{{product.price}}直接购买吗？</view>
    <view>两人拼团只需￥{{product.groupPrice}}喔〜</view>
  </view>
  <view class="foot" bindtap="hideModal">
    <button class="btn" bindtap="tapCreateOrder">继续支付</button>
    <button class="btn group" bindtap="tpaCreateGroup">我要拼团</button>
  </view>
</view>