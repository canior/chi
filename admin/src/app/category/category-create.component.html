<page [title]="'编辑'">
    
    <nz-breadcrumb  [style.marginBottom.px]="14">
        <nz-breadcrumb-item>
            首页
        </nz-breadcrumb-item>
        <nz-breadcrumb-item>
            <a>控制面板</a>
        </nz-breadcrumb-item>
    </nz-breadcrumb>
    
    <nz-spin  [nzSpinning]="isLoading">
        <div nz-row [nzGutter]="16"  [style.marginBottom.px]="24">
            <form nz-form>
                <div nz-col class="gutter-row"  nzXl="24" nzXs="24"  [style.marginBottom.px]="24">
                    <div class="gutter-box">
                        <nz-card nzTitle="编辑" [nzBordered]="false" [style.marginBottom.px]="24">
                            
                            <div nz-col class="gutter-row" nzXl="12" nzXs="12" >
                                <div class="gutter-box">
                                    <nz-form-item>
                                        <nz-form-label>名称</nz-form-label>
                                        <nz-form-control>
                                            <input nz-input name="title" [(ngModel)]="selectCategory.title" />
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                            </div>
                            <div nz-col class="gutter-row" nzXl="12" nzXs="12" >
                                <div class="gutter-box">
                                    <nz-form-item class="nz-form-item">
                                        <nz-form-label class="nz-formlable">父级分类</nz-form-label>
                                        <nz-form-control>
                                            <nz-tree-select name="parent_id" [(ngModel)]="selectCategory.parent_id" [nzNodes]="categorys" [nzDefaultExpandAll]="true">
                                            </nz-tree-select>
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                            </div>
                            <div nz-col class="gutter-row" nzXl="12" nzXs="12" >
                                <div class="gutter-box">
                                    <nz-form-item>
                                        <nz-form-label>阿里云视频ID</nz-form-label>
                                        <nz-form-control>
                                            <input nz-input name="aliyunVideoId" [(ngModel)]="selectCategory.aliyunVideoId" />
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                            </div>
                            <div nz-col class="gutter-row" nzXl="12" nzXs="12"  >
                                <div class="gutter-box">
                                    <nz-form-item>
                                        <nz-form-label>排序</nz-form-label>
                                        <nz-form-control>
                                            <input nz-input name="priority" placeholder="默认为ID" [(ngModel)]="selectCategory.priority" />
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                            </div>
                            
                            <div nz-col class="gutter-row" nzXl="12" nzXs="24" >
                                <div class="gutter-box">
                                    <nz-form-item class="nz-form-item">
                                        <nz-form-label class="nz-formlable" nzFor="remark">图像</nz-form-label>
                                        <nz-form-control>
                                            <nz-upload 
                                                nzAction="{{file_upload_url}}" 
                                                nzListType="picture-card" 
                                                [(nzFileList)]="fileList" 
                                                [nzShowButton]="fileList.length < 1" 
                                                [nzShowUploadList]="showUploadList" 
                                                [nzMultiple]="false"
                                                (nzChange)="handleChange($event)"
                                            >
                                                <i nz-icon nzType="plus"></i>
                                                <div class="ant-upload-text">上传</div>
                                            </nz-upload>
                                            <nz-modal [nzVisible]="previewVisible" [nzContent]="modalContent" [nzFooter]="null" (nzOnCancel)="previewVisible = false">
                                                <ng-template #modalContent>
                                                    <img [src]="previewImage" [ngStyle]="{ width: '100%' }" />
                                                </ng-template>
                                            </nz-modal>
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                            </div>
                            <div nz-col class="gutter-row" nzXl="12" nzXs="24" >
                                <div class="gutter-box">
                                    <nz-form-item class="nz-form-item">
                                        <nz-form-label class="nz-formlable" nzFor="remark">分类视频封面图片</nz-form-label>
                                        <nz-form-control>
                                            <nz-upload 
                                                nzAction="{{file_upload_url}}" 
                                                nzListType="picture-card" 
                                                [(nzFileList)]="fileList" 
                                                [nzShowButton]="fileList.length < 1" 
                                                [nzShowUploadList]="showUploadList" 
                                                [nzMultiple]="false"
                                                (nzChange)="handleChange($event)"
                                            >
                                                <i nz-icon nzType="plus"></i>
                                                <div class="ant-upload-text">上传</div>
                                            </nz-upload>
                                            <nz-modal [nzVisible]="previewVisible" [nzContent]="modalContent" [nzFooter]="null" (nzOnCancel)="previewVisible = false">
                                                <ng-template #modalContent>
                                                    <img [src]="previewImage" [ngStyle]="{ width: '100%' }" />
                                                </ng-template>
                                            </nz-modal>
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                            </div>


                            <div nz-col class="gutter-row" nzXl="24" nzXs="24" >
                                <div class="gutter-box">
                                    <nz-form-item>
                                        <nz-form-label>分类描述 </nz-form-label>
                                        <nz-form-control>
                                            <tinymce rows="10" name="content" [(ngModel)]="selectCategory.content"  [config]="config"></tinymce>
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                            </div>

                            <div nz-col class="gutter-row" nzXl="24" nzXs="24" >
                                <div class="gutter-box">
                                    <nz-form-item>
                                        <nz-form-control>
                                            <button (click)="doSubmit()" nz-button nzType="primary">保存</button>
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                            </div>

                        </nz-card>

                    </div>
                </div>
            </form>
        </div>
    </nz-spin>

</page>